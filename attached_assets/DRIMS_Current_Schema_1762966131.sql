--
-- PostgreSQL database dump
--

-- Dumped from database version 16.9 (415ebe8)
-- Dumped by pg_dump version 16.9

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: citext; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS citext WITH SCHEMA public;


--
-- Name: EXTENSION citext; Type: COMMENT; Schema: -; Owner: -
--

COMMENT ON EXTENSION citext IS 'data type for case-insensitive character strings';


SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: agency; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.agency (
    agency_id integer NOT NULL,
    agency_name character varying(120) NOT NULL,
    address1_text character varying(255) NOT NULL,
    address2_text character varying(255),
    parish_code character(2) NOT NULL,
    contact_name character varying(50) NOT NULL,
    phone_no character varying(20) NOT NULL,
    email_text character varying(100),
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    agency_type character varying(16) NOT NULL,
    ineligible_event_id integer,
    status_code character(1) NOT NULL,
    CONSTRAINT agency_agency_name_check CHECK (((agency_name)::text = upper((agency_name)::text))),
    CONSTRAINT agency_contact_name_check CHECK (((contact_name)::text = upper((contact_name)::text))),
    CONSTRAINT c_agency_3 CHECK (((agency_type)::text = ANY ((ARRAY['DISTRIBUTOR'::character varying, 'SHELTER'::character varying])::text[]))),
    CONSTRAINT c_agency_5 CHECK ((status_code = ANY (ARRAY['A'::bpchar, 'I'::bpchar])))
);


--
-- Name: agency_agency_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.agency ALTER COLUMN agency_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.agency_agency_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: country; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.country (
    country_id smallint NOT NULL,
    country_name character varying(80) NOT NULL
);


--
-- Name: custodian; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.custodian (
    custodian_id integer NOT NULL,
    custodian_name character varying(120) DEFAULT 'OFFICE OF DISASTER PREPAREDNESS AND EMERGENCY MANAGEMENT (ODPEM)'::character varying NOT NULL,
    address1_text character varying(255) NOT NULL,
    address2_text character varying(255),
    parish_code character(2) NOT NULL,
    contact_name character varying(50) NOT NULL,
    phone_no character varying(20) NOT NULL,
    email_text character varying(100),
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    CONSTRAINT custodian_contact_name_check CHECK (((contact_name)::text = upper((contact_name)::text))),
    CONSTRAINT custodian_custodian_name_check CHECK (((custodian_name)::text = upper((custodian_name)::text)))
);


--
-- Name: custodian_custodian_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.custodian ALTER COLUMN custodian_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.custodian_custodian_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: dbintake; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.dbintake (
    reliefpkg_id integer NOT NULL,
    inventory_id integer NOT NULL,
    intake_date date NOT NULL,
    comments_text character varying(255),
    status_code character(1) NOT NULL,
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone,
    verify_by_id character varying(20) NOT NULL,
    verify_dtime timestamp(0) without time zone,
    version_nbr integer NOT NULL,
    CONSTRAINT dbintake_intake_date_check CHECK ((intake_date <= CURRENT_DATE)),
    CONSTRAINT dbintake_status_code_check CHECK ((status_code = ANY (ARRAY['I'::bpchar, 'C'::bpchar, 'V'::bpchar])))
);


--
-- Name: dbintake_item; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.dbintake_item (
    reliefpkg_id integer NOT NULL,
    inventory_id integer NOT NULL,
    item_id integer NOT NULL,
    usable_qty numeric(12,2) NOT NULL,
    location1_id integer,
    defective_qty numeric(12,2) NOT NULL,
    location2_id integer,
    expired_qty numeric(12,2) NOT NULL,
    location3_id integer,
    uom_code character varying(25) NOT NULL,
    status_code character(1) NOT NULL,
    comments_text character varying(255),
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    CONSTRAINT dbintake_item_defective_qty_check CHECK ((defective_qty >= 0.00)),
    CONSTRAINT dbintake_item_expired_qty_check CHECK ((expired_qty >= 0.00)),
    CONSTRAINT dbintake_item_status_code_check CHECK ((status_code = ANY (ARRAY['P'::bpchar, 'V'::bpchar]))),
    CONSTRAINT dbintake_item_usable_qty_check CHECK ((usable_qty >= 0.00))
);


--
-- Name: dispatch_manifest; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.dispatch_manifest (
    id integer NOT NULL,
    fulfilment_id integer NOT NULL,
    manifest_number character varying(64) NOT NULL,
    from_warehouse_id integer NOT NULL,
    to_warehouse_id integer NOT NULL,
    vehicle_info character varying(200),
    driver_name character varying(200),
    driver_contact character varying(100),
    dispatch_notes text,
    dispatched_by character varying(200) NOT NULL,
    dispatched_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


--
-- Name: dispatch_manifest_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.dispatch_manifest_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: dispatch_manifest_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.dispatch_manifest_id_seq OWNED BY public.dispatch_manifest.id;


--
-- Name: distribution_package; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.distribution_package (
    id integer NOT NULL,
    package_number character varying(64) NOT NULL,
    recipient_agency_id integer NOT NULL,
    assigned_warehouse_id integer,
    event_id integer,
    status character varying(50) DEFAULT 'Draft'::character varying NOT NULL,
    is_partial boolean DEFAULT false NOT NULL,
    created_by character varying(200) NOT NULL,
    approved_by character varying(200),
    approved_at timestamp without time zone,
    dispatched_by character varying(200),
    dispatched_at timestamp without time zone,
    delivered_at timestamp without time zone,
    notes text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


--
-- Name: distribution_package_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.distribution_package_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: distribution_package_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.distribution_package_id_seq OWNED BY public.distribution_package.id;


--
-- Name: distribution_package_item; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.distribution_package_item (
    id integer NOT NULL,
    package_id integer NOT NULL,
    item_id integer NOT NULL,
    quantity numeric(12,2) NOT NULL,
    notes text
);


--
-- Name: distribution_package_item_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.distribution_package_item_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: distribution_package_item_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.distribution_package_item_id_seq OWNED BY public.distribution_package_item.id;


--
-- Name: dnintake; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.dnintake (
    donation_id integer NOT NULL,
    inventory_id integer NOT NULL,
    intake_date date NOT NULL,
    comments_text character varying(255),
    status_code character(1) NOT NULL,
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone NOT NULL,
    verify_by_id character varying(20) NOT NULL,
    verify_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    CONSTRAINT dnintake_intake_date_check CHECK ((intake_date <= CURRENT_DATE)),
    CONSTRAINT dnintake_status_code_check CHECK ((status_code = ANY (ARRAY['I'::bpchar, 'C'::bpchar, 'V'::bpchar])))
);


--
-- Name: dnintake_item; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.dnintake_item (
    donation_id integer NOT NULL,
    inventory_id integer NOT NULL,
    item_id integer NOT NULL,
    usable_qty numeric(12,2) NOT NULL,
    location1_id integer,
    defective_qty numeric(12,2) NOT NULL,
    location2_id integer,
    expired_qty numeric(12,2) NOT NULL,
    location3_id integer,
    uom_code character varying(25) NOT NULL,
    status_code character(1) NOT NULL,
    comments_text character varying(255),
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    CONSTRAINT dnintake_item_defective_qty_check CHECK ((defective_qty >= 0.00)),
    CONSTRAINT dnintake_item_expired_qty_check CHECK ((expired_qty >= 0.00)),
    CONSTRAINT dnintake_item_status_code_check CHECK ((status_code = ANY (ARRAY['P'::bpchar, 'V'::bpchar]))),
    CONSTRAINT dnintake_item_usable_qty_check CHECK ((usable_qty >= 0.00))
);


--
-- Name: donation; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.donation (
    donation_id integer NOT NULL,
    donor_id integer NOT NULL,
    donation_desc text NOT NULL,
    event_id integer NOT NULL,
    custodian_id integer NOT NULL,
    received_date date NOT NULL,
    status_code character(1) NOT NULL,
    comments_text text,
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    verify_by_id character varying(20) NOT NULL,
    verify_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    CONSTRAINT donation_received_date_check CHECK ((received_date <= CURRENT_DATE)),
    CONSTRAINT donation_status_code_check CHECK ((status_code = ANY (ARRAY['E'::bpchar, 'V'::bpchar])))
);


--
-- Name: donation_donation_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.donation ALTER COLUMN donation_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.donation_donation_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: donation_item; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.donation_item (
    donation_id integer NOT NULL,
    item_id integer NOT NULL,
    item_qty numeric(12,2) NOT NULL,
    uom_code character varying(25) NOT NULL,
    location_name text NOT NULL,
    status_code character(1) NOT NULL,
    comments_text text,
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    verify_by_id character varying(20) NOT NULL,
    verify_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    CONSTRAINT donation_item_item_qty_check CHECK ((item_qty >= 0.00)),
    CONSTRAINT donation_item_status_code_check CHECK ((status_code = ANY (ARRAY['P'::bpchar, 'V'::bpchar])))
);


--
-- Name: donor; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.donor (
    donor_id integer NOT NULL,
    donor_type character(1) NOT NULL,
    donor_name character varying(255) NOT NULL,
    org_type_desc character varying(30),
    address1_text character varying(255) NOT NULL,
    address2_text character varying(255),
    country_id smallint DEFAULT 388 NOT NULL,
    phone_no character varying(20) NOT NULL,
    email_text character varying(100),
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    CONSTRAINT donor_donor_name_check CHECK (((donor_name)::text = upper((donor_name)::text))),
    CONSTRAINT donor_donor_type_check CHECK ((donor_type = ANY (ARRAY['I'::bpchar, 'O'::bpchar])))
);


--
-- Name: donor_donor_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.donor ALTER COLUMN donor_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.donor_donor_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: event; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.event (
    event_id integer NOT NULL,
    event_type character varying(16) NOT NULL,
    start_date date NOT NULL,
    event_name character varying(60) NOT NULL,
    event_desc character varying(255) NOT NULL,
    impact_desc text NOT NULL,
    status_code character(1) NOT NULL,
    closed_date date,
    reason_desc character varying(255),
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    CONSTRAINT event_check CHECK ((((status_code = 'A'::bpchar) AND (closed_date IS NULL)) OR ((status_code = 'C'::bpchar) AND (closed_date IS NOT NULL)))),
    CONSTRAINT event_check1 CHECK ((((reason_desc IS NULL) AND (closed_date IS NULL)) OR ((reason_desc IS NOT NULL) AND (closed_date IS NOT NULL)))),
    CONSTRAINT event_event_type_check CHECK (((event_type)::text = ANY ((ARRAY['STORM'::character varying, 'TORNADO'::character varying, 'FLOOD'::character varying, 'TSUNAMI'::character varying, 'FIRE'::character varying, 'EARTHQUAKE'::character varying, 'WAR'::character varying, 'EPIDEMIC'::character varying])::text[]))),
    CONSTRAINT event_start_date_check CHECK ((start_date <= CURRENT_DATE)),
    CONSTRAINT event_status_code_check CHECK ((status_code = ANY (ARRAY['A'::bpchar, 'C'::bpchar])))
);


--
-- Name: event_event_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.event ALTER COLUMN event_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.event_event_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: fulfilment; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.fulfilment (
    id integer NOT NULL,
    needs_list_id integer NOT NULL,
    fulfilment_number character varying(64) NOT NULL,
    status character varying(50) DEFAULT 'In Preparation'::character varying NOT NULL,
    is_partial boolean DEFAULT false NOT NULL,
    notes text,
    prepared_by character varying(200),
    prepared_at timestamp without time zone,
    dispatched_by character varying(200),
    dispatched_at timestamp without time zone,
    received_by character varying(200),
    received_at timestamp without time zone,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


--
-- Name: fulfilment_edit_log; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.fulfilment_edit_log (
    id integer NOT NULL,
    fulfilment_id integer NOT NULL,
    line_item_id integer,
    field_changed character varying(100) NOT NULL,
    old_value text,
    new_value text,
    reason text,
    changed_by character varying(200) NOT NULL,
    changed_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


--
-- Name: fulfilment_edit_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.fulfilment_edit_log_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: fulfilment_edit_log_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.fulfilment_edit_log_id_seq OWNED BY public.fulfilment_edit_log.id;


--
-- Name: fulfilment_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.fulfilment_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: fulfilment_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.fulfilment_id_seq OWNED BY public.fulfilment.id;


--
-- Name: fulfilment_line_item; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.fulfilment_line_item (
    id integer NOT NULL,
    fulfilment_id integer NOT NULL,
    source_warehouse_id integer NOT NULL,
    item_id integer NOT NULL,
    allocated_qty numeric(12,2) NOT NULL,
    dispatched_qty numeric(12,2) DEFAULT 0 NOT NULL,
    received_qty numeric(12,2) DEFAULT 0 NOT NULL,
    notes text,
    status character varying(50) DEFAULT 'Allocated'::character varying,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


--
-- Name: fulfilment_line_item_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.fulfilment_line_item_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: fulfilment_line_item_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.fulfilment_line_item_id_seq OWNED BY public.fulfilment_line_item.id;


--
-- Name: inventory; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.inventory (
    inventory_id integer NOT NULL,
    warehouse_id integer NOT NULL,
    item_id integer NOT NULL,
    usable_qty numeric(12,2) NOT NULL,
    reserved_qty numeric(12,2) NOT NULL,
    defective_qty numeric(12,2) NOT NULL,
    expired_qty numeric(12,2) NOT NULL,
    uom_code character varying(25) NOT NULL,
    last_verified_by character varying(20),
    last_verified_date date,
    status_code character(1) NOT NULL,
    comments_text text,
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    CONSTRAINT inventory_check CHECK ((reserved_qty <= usable_qty)),
    CONSTRAINT inventory_check1 CHECK ((((last_verified_by IS NULL) AND (last_verified_date IS NULL)) OR ((last_verified_by IS NOT NULL) AND (last_verified_date IS NOT NULL)))),
    CONSTRAINT inventory_defective_qty_check CHECK ((defective_qty >= 0.00)),
    CONSTRAINT inventory_expired_qty_check CHECK ((expired_qty >= 0.00)),
    CONSTRAINT inventory_status_code_check CHECK ((status_code = ANY (ARRAY['A'::bpchar, 'U'::bpchar]))),
    CONSTRAINT inventory_usable_qty_check CHECK ((usable_qty >= 0.00))
);


--
-- Name: inventory_inventory_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.inventory ALTER COLUMN inventory_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.inventory_inventory_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: item; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.item (
    item_id integer NOT NULL,
    item_name character varying(60) NOT NULL,
    sku_code character varying(30) NOT NULL,
    category_code character varying(30) NOT NULL,
    item_desc public.citext NOT NULL,
    reorder_qty numeric(12,2) NOT NULL,
    default_uom_code character varying(25) NOT NULL,
    usage_desc text,
    storage_desc text,
    expiration_apply_flag boolean NOT NULL,
    comments_text text,
    status_code character(1) NOT NULL,
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    CONSTRAINT item_item_name_check CHECK (((item_name)::text = upper((item_name)::text))),
    CONSTRAINT item_reorder_qty_check CHECK ((reorder_qty > 0.00)),
    CONSTRAINT item_sku_code_check CHECK (((sku_code)::text = upper((sku_code)::text))),
    CONSTRAINT item_status_code_check CHECK ((status_code = ANY (ARRAY['A'::bpchar, 'I'::bpchar])))
);


--
-- Name: item_item_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.item ALTER COLUMN item_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.item_item_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: item_location; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.item_location (
    inventory_id integer NOT NULL,
    item_id integer NOT NULL,
    location_id integer NOT NULL,
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL
);


--
-- Name: itemcatg; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.itemcatg (
    category_code character varying(30) NOT NULL,
    category_desc character varying(60) NOT NULL,
    comments_text text,
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    CONSTRAINT itemcatg_category_code_check CHECK (((category_code)::text = upper((category_code)::text)))
);


--
-- Name: location; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.location (
    location_id integer NOT NULL,
    inventory_id integer NOT NULL,
    location_desc character varying(255) NOT NULL,
    status_code character(1) NOT NULL,
    comments_text character varying(255),
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    CONSTRAINT location_status_code_check CHECK ((status_code = ANY (ARRAY['O'::bpchar, 'C'::bpchar])))
);


--
-- Name: location_location_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.location ALTER COLUMN location_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.location_location_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: needs_list; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.needs_list (
    id integer NOT NULL,
    list_number character varying(64) NOT NULL,
    agency_id integer NOT NULL,
    event_id integer NOT NULL,
    submission_type character varying(20) DEFAULT 'DRAFT'::character varying NOT NULL,
    requested_by_name character varying(200),
    requested_by_contact character varying(200),
    priority character varying(20) DEFAULT 'MEDIUM'::character varying NOT NULL,
    urgency character varying(20) DEFAULT 'ROUTINE'::character varying,
    status character varying(50) DEFAULT 'Draft'::character varying NOT NULL,
    is_draft boolean DEFAULT true NOT NULL,
    is_locked boolean DEFAULT false NOT NULL,
    locked_by character varying(200),
    locked_at timestamp without time zone,
    notes text,
    justification text,
    review_notes text,
    created_by character varying(200) NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    submitted_at timestamp without time zone,
    reviewed_by character varying(200),
    reviewed_at timestamp without time zone,
    approved_by character varying(200),
    approved_at timestamp without time zone
);


--
-- Name: needs_list_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.needs_list_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: needs_list_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.needs_list_id_seq OWNED BY public.needs_list.id;


--
-- Name: needs_list_item; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.needs_list_item (
    id integer NOT NULL,
    needs_list_id integer NOT NULL,
    item_id integer NOT NULL,
    requested_qty numeric(12,2) NOT NULL,
    approved_qty numeric(12,2) DEFAULT 0 NOT NULL,
    fulfilled_qty numeric(12,2) DEFAULT 0 NOT NULL,
    notes text,
    justification text,
    status character varying(50) DEFAULT 'Pending'::character varying,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


--
-- Name: needs_list_item_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.needs_list_item_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: needs_list_item_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.needs_list_item_id_seq OWNED BY public.needs_list_item.id;


--
-- Name: notification; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.notification (
    id integer NOT NULL,
    user_id integer NOT NULL,
    warehouse_id integer,
    reliefrqst_id integer,
    title character varying(200) NOT NULL,
    message text NOT NULL,
    type character varying(50) NOT NULL,
    status character varying(20) DEFAULT 'unread'::character varying NOT NULL,
    link_url character varying(500),
    payload text,
    is_archived boolean DEFAULT false NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


--
-- Name: notification_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.notification_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: notification_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.notification_id_seq OWNED BY public.notification.id;


--
-- Name: parish; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.parish (
    parish_code character(2) NOT NULL,
    parish_name character varying(40) NOT NULL,
    CONSTRAINT parish_parish_code_check CHECK (((parish_code ~ similar_to_escape('[0-9]*'::text)) AND (((parish_code)::integer >= 1) AND ((parish_code)::integer <= 14))))
);


--
-- Name: receipt_record; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.receipt_record (
    id integer NOT NULL,
    fulfilment_id integer NOT NULL,
    receipt_number character varying(64) NOT NULL,
    received_by character varying(200) NOT NULL,
    received_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    condition_notes text,
    discrepancy_notes text,
    signature_path character varying(500)
);


--
-- Name: receipt_record_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.receipt_record_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: receipt_record_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.receipt_record_id_seq OWNED BY public.receipt_record.id;


--
-- Name: reliefpkg; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.reliefpkg (
    reliefpkg_id integer NOT NULL,
    to_inventory_id integer NOT NULL,
    reliefrqst_id integer NOT NULL,
    start_date date DEFAULT CURRENT_DATE NOT NULL,
    dispatch_dtime timestamp(0) without time zone,
    transport_mode character varying(255),
    comments_text character varying(255),
    status_code character(1) NOT NULL,
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone,
    verify_by_id character varying(20) NOT NULL,
    verify_dtime timestamp(0) without time zone,
    version_nbr integer NOT NULL,
    received_by_id character varying(20) NOT NULL,
    received_dtime timestamp(0) without time zone,
    CONSTRAINT c_reliefpkg_2 CHECK ((((dispatch_dtime IS NULL) AND (status_code <> 'D'::bpchar)) OR ((dispatch_dtime IS NOT NULL) AND (status_code = 'D'::bpchar)))),
    CONSTRAINT c_reliefpkg_3 CHECK ((status_code = ANY (ARRAY['P'::bpchar, 'C'::bpchar, 'V'::bpchar, 'D'::bpchar, 'R'::bpchar]))),
    CONSTRAINT reliefpkg_start_date_check CHECK ((start_date <= CURRENT_DATE))
);


--
-- Name: reliefpkg_item; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.reliefpkg_item (
    reliefpkg_id integer NOT NULL,
    fr_inventory_id integer NOT NULL,
    item_id integer NOT NULL,
    item_qty numeric(12,2) NOT NULL,
    uom_code character varying(25) NOT NULL,
    reason_text character varying(255),
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    CONSTRAINT reliefpkg_item_item_qty_check CHECK ((item_qty >= 0.00))
);


--
-- Name: reliefpkg_reliefpkg_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.reliefpkg ALTER COLUMN reliefpkg_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.reliefpkg_reliefpkg_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: reliefrqst; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.reliefrqst (
    reliefrqst_id integer NOT NULL,
    agency_id integer NOT NULL,
    request_date date NOT NULL,
    urgency_ind character(1) NOT NULL,
    status_code smallint NOT NULL,
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    review_by_id character varying(20),
    review_dtime timestamp(0) without time zone,
    action_by_id character varying(20),
    action_dtime timestamp(0) without time zone,
    version_nbr integer NOT NULL,
    eligible_event_id integer,
    rqst_notes_text text,
    review_notes_text text,
    CONSTRAINT c_reliefrqst_3 CHECK (((status_code >= 1) AND (status_code <= 7))),
    CONSTRAINT c_reliefrqst_4a CHECK ((((review_by_id IS NULL) AND (status_code < 2)) OR ((review_by_id IS NOT NULL) AND (status_code >= 2)))),
    CONSTRAINT c_reliefrqst_4b CHECK ((((review_by_id IS NULL) AND (review_dtime IS NULL)) OR ((review_by_id IS NOT NULL) AND (review_dtime IS NOT NULL)))),
    CONSTRAINT c_reliefrqst_5a CHECK ((((action_by_id IS NULL) AND (status_code < 4)) OR ((action_by_id IS NOT NULL) AND (status_code >= 4)))),
    CONSTRAINT c_reliefrqst_5b CHECK ((((action_by_id IS NULL) AND (action_dtime IS NULL)) OR ((action_by_id IS NOT NULL) AND (action_dtime IS NOT NULL)))),
    CONSTRAINT reliefrqst_request_date_check CHECK ((request_date <= CURRENT_DATE)),
    CONSTRAINT reliefrqst_urgency_ind_check CHECK ((urgency_ind = ANY (ARRAY['L'::bpchar, 'M'::bpchar, 'H'::bpchar, 'C'::bpchar])))
);


--
-- Name: reliefrqst_item; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.reliefrqst_item (
    reliefrqst_id integer NOT NULL,
    item_id integer NOT NULL,
    request_qty numeric(12,2) NOT NULL,
    issue_qty numeric(12,2) NOT NULL,
    urgency_ind character(1) NOT NULL,
    rqst_reason_desc character varying(255),
    required_by_date date,
    status_code character(1) NOT NULL,
    status_reason_desc character varying(255),
    action_by_id character varying(20),
    action_dtime timestamp(0) without time zone,
    version_nbr integer NOT NULL,
    CONSTRAINT c_reliefrqst_item_2 CHECK ((issue_qty <= request_qty)),
    CONSTRAINT c_reliefrqst_item_4 CHECK (((rqst_reason_desc IS NOT NULL) OR ((rqst_reason_desc IS NULL) AND (urgency_ind = ANY (ARRAY['L'::bpchar, 'M'::bpchar]))))),
    CONSTRAINT c_reliefrqst_item_5 CHECK (((required_by_date IS NOT NULL) OR ((required_by_date IS NULL) AND (urgency_ind = ANY (ARRAY['L'::bpchar, 'M'::bpchar]))))),
    CONSTRAINT c_reliefrqst_item_7 CHECK ((((action_by_id IS NULL) AND (status_code = 'R'::bpchar)) OR ((action_by_id IS NOT NULL) AND (status_code <> 'R'::bpchar)))),
    CONSTRAINT c_reliefrqst_item_8 CHECK ((((action_by_id IS NULL) AND (action_dtime IS NULL)) OR ((action_by_id IS NOT NULL) AND (action_dtime IS NOT NULL)))),
    CONSTRAINT reliefrqst_item_request_qty_check CHECK ((request_qty > 0.00)),
    CONSTRAINT reliefrqst_item_status_code_check CHECK ((status_code = ANY (ARRAY['R'::bpchar, 'U'::bpchar, 'W'::bpchar, 'D'::bpchar, 'P'::bpchar, 'L'::bpchar, 'F'::bpchar]))),
    CONSTRAINT reliefrqst_item_urgency_ind_check CHECK ((urgency_ind = ANY (ARRAY['L'::bpchar, 'M'::bpchar, 'H'::bpchar, 'C'::bpchar])))
);


--
-- Name: reliefrqst_reliefrqst_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.reliefrqst ALTER COLUMN reliefrqst_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.reliefrqst_reliefrqst_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: role; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.role (
    id integer NOT NULL,
    code character varying(50) NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


--
-- Name: role_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.role_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: role_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.role_id_seq OWNED BY public.role.id;


--
-- Name: rtintake; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.rtintake (
    xfreturn_id integer NOT NULL,
    inventory_id integer NOT NULL,
    intake_date date NOT NULL,
    comments_text character varying(255),
    status_code character(1) NOT NULL,
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone,
    verify_by_id character varying(20) NOT NULL,
    verify_dtime timestamp(0) without time zone,
    version_nbr integer NOT NULL,
    CONSTRAINT rtintake_intake_date_check CHECK ((intake_date <= CURRENT_DATE)),
    CONSTRAINT rtintake_status_code_check CHECK ((status_code = ANY (ARRAY['I'::bpchar, 'C'::bpchar, 'V'::bpchar])))
);


--
-- Name: rtintake_item; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.rtintake_item (
    xfreturn_id integer NOT NULL,
    inventory_id integer NOT NULL,
    item_id integer NOT NULL,
    usable_qty numeric(12,2) NOT NULL,
    location1_id integer,
    defective_qty numeric(12,2) NOT NULL,
    location2_id integer,
    expired_qty numeric(12,2) NOT NULL,
    location3_id integer,
    uom_code character varying(25) NOT NULL,
    status_code character(1) NOT NULL,
    comments_text character varying(255),
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    CONSTRAINT rtintake_item_defective_qty_check CHECK ((defective_qty >= 0.00)),
    CONSTRAINT rtintake_item_expired_qty_check CHECK ((expired_qty >= 0.00)),
    CONSTRAINT rtintake_item_status_code_check CHECK ((status_code = ANY (ARRAY['P'::bpchar, 'V'::bpchar]))),
    CONSTRAINT rtintake_item_usable_qty_check CHECK ((usable_qty >= 0.00))
);


--
-- Name: transaction; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.transaction (
    id integer NOT NULL,
    item_id integer,
    ttype character varying(8) NOT NULL,
    qty numeric(12,2) NOT NULL,
    warehouse_id integer,
    donor_id integer,
    event_id integer,
    expiry_date date,
    notes text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    created_by character varying(200)
);


--
-- Name: transaction_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.transaction_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: transaction_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.transaction_id_seq OWNED BY public.transaction.id;


--
-- Name: transfer; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.transfer (
    transfer_id integer NOT NULL,
    fr_inventory_id integer NOT NULL,
    to_inventory_id integer NOT NULL,
    transfer_date date DEFAULT CURRENT_DATE NOT NULL,
    status_code character(1) NOT NULL,
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone NOT NULL,
    verify_by_id character varying(20) NOT NULL,
    verify_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    event_id integer,
    reason_text character varying(255),
    CONSTRAINT c_transfer_2 CHECK ((status_code = ANY (ARRAY['D'::bpchar, 'C'::bpchar, 'V'::bpchar]))),
    CONSTRAINT transfer_transfer_date_check CHECK ((transfer_date <= CURRENT_DATE))
);


--
-- Name: transfer_item; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.transfer_item (
    transfer_id integer NOT NULL,
    item_id integer NOT NULL,
    item_qty numeric(12,2) NOT NULL,
    uom_code character varying(25) NOT NULL,
    reason_text character varying(255),
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    CONSTRAINT transfer_item_item_qty_check CHECK ((item_qty >= 0.00))
);


--
-- Name: transfer_request; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.transfer_request (
    id integer NOT NULL,
    from_warehouse_id integer NOT NULL,
    to_warehouse_id integer NOT NULL,
    item_id integer NOT NULL,
    quantity numeric(12,2) NOT NULL,
    status character varying(20) DEFAULT 'PENDING'::character varying NOT NULL,
    requested_by integer,
    requested_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    reviewed_by integer,
    reviewed_at timestamp without time zone,
    notes text
);


--
-- Name: transfer_request_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.transfer_request_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: transfer_request_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.transfer_request_id_seq OWNED BY public.transfer_request.id;


--
-- Name: transfer_transfer_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.transfer ALTER COLUMN transfer_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.transfer_transfer_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: unitofmeasure; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.unitofmeasure (
    uom_code character varying(25) NOT NULL,
    uom_desc character varying(60) NOT NULL,
    comments_text text,
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    CONSTRAINT unitofmeasure_uom_code_check CHECK (((uom_code)::text = upper((uom_code)::text)))
);


--
-- Name: user; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public."user" (
    id integer NOT NULL,
    email character varying(200) NOT NULL,
    password_hash character varying(256) NOT NULL,
    first_name character varying(100),
    last_name character varying(100),
    full_name character varying(200),
    role character varying(50),
    is_active boolean DEFAULT true NOT NULL,
    organization character varying(200),
    job_title character varying(200),
    phone character varying(50),
    timezone character varying(50) DEFAULT 'America/Jamaica'::character varying NOT NULL,
    language character varying(10) DEFAULT 'en'::character varying NOT NULL,
    notification_preferences text,
    assigned_warehouse_id integer,
    last_login_at timestamp without time zone,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    created_by_id integer,
    updated_by_id integer
);


--
-- Name: user_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.user_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: user_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.user_id_seq OWNED BY public."user".id;


--
-- Name: user_role; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.user_role (
    user_id integer NOT NULL,
    role_id integer NOT NULL,
    assigned_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    assigned_by integer
);


--
-- Name: user_warehouse; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.user_warehouse (
    user_id integer NOT NULL,
    warehouse_id integer NOT NULL,
    assigned_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    assigned_by integer
);


--
-- Name: warehouse; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.warehouse (
    warehouse_id integer NOT NULL,
    warehouse_name text NOT NULL,
    warehouse_type character varying(10) NOT NULL,
    address1_text character varying(255) NOT NULL,
    address2_text character varying(255),
    parish_code character(2) NOT NULL,
    contact_name character varying(50) NOT NULL,
    phone_no character varying(20) NOT NULL,
    email_text character varying(100),
    custodian_id integer NOT NULL,
    status_code character(1) NOT NULL,
    reason_desc character varying(255),
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    CONSTRAINT warehouse_check CHECK ((((reason_desc IS NULL) AND (status_code = 'A'::bpchar)) OR ((reason_desc IS NOT NULL) AND (status_code = 'I'::bpchar)))),
    CONSTRAINT warehouse_contact_name_check CHECK (((contact_name)::text = upper((contact_name)::text))),
    CONSTRAINT warehouse_status_code_check CHECK ((status_code = ANY (ARRAY['A'::bpchar, 'I'::bpchar]))),
    CONSTRAINT warehouse_warehouse_type_check CHECK (((warehouse_type)::text = ANY ((ARRAY['MAIN'::character varying, 'HUB'::character varying, 'SUB-HUB'::character varying, 'AGENCY'::character varying])::text[])))
);


--
-- Name: warehouse_warehouse_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.warehouse ALTER COLUMN warehouse_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.warehouse_warehouse_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: xfintake; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.xfintake (
    transfer_id integer NOT NULL,
    inventory_id integer NOT NULL,
    intake_date date NOT NULL,
    comments_text character varying(255),
    status_code character(1) NOT NULL,
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone,
    verify_by_id character varying(20) NOT NULL,
    verify_dtime timestamp(0) without time zone,
    version_nbr integer NOT NULL,
    CONSTRAINT xfintake_intake_date_check CHECK ((intake_date <= CURRENT_DATE)),
    CONSTRAINT xfintake_status_code_check CHECK ((status_code = ANY (ARRAY['I'::bpchar, 'C'::bpchar, 'V'::bpchar])))
);


--
-- Name: xfintake_item; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.xfintake_item (
    transfer_id integer NOT NULL,
    inventory_id integer NOT NULL,
    item_id integer NOT NULL,
    usable_qty numeric(12,2) NOT NULL,
    location1_id integer,
    defective_qty numeric(12,2) NOT NULL,
    location2_id integer,
    expired_qty numeric(12,2) NOT NULL,
    location3_id integer,
    uom_code character varying(25) NOT NULL,
    status_code character(1) NOT NULL,
    comments_text character varying(255),
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    CONSTRAINT xfintake_item_defective_qty_check CHECK ((defective_qty >= 0.00)),
    CONSTRAINT xfintake_item_expired_qty_check CHECK ((expired_qty >= 0.00)),
    CONSTRAINT xfintake_item_status_code_check CHECK ((status_code = ANY (ARRAY['P'::bpchar, 'V'::bpchar]))),
    CONSTRAINT xfintake_item_usable_qty_check CHECK ((usable_qty >= 0.00))
);


--
-- Name: xfreturn; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.xfreturn (
    xfreturn_id integer NOT NULL,
    fr_inventory_id integer NOT NULL,
    to_inventory_id integer NOT NULL,
    return_date date DEFAULT CURRENT_DATE NOT NULL,
    reason_text character varying(255),
    status_code character(1) NOT NULL,
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone,
    verify_by_id character varying(20) NOT NULL,
    verify_dtime timestamp(0) without time zone,
    version_nbr integer NOT NULL,
    CONSTRAINT xfreturn_return_date_check CHECK ((return_date <= CURRENT_DATE)),
    CONSTRAINT xfreturn_status_code_check CHECK ((status_code = ANY (ARRAY['D'::bpchar, 'C'::bpchar, 'V'::bpchar])))
);


--
-- Name: xfreturn_item; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.xfreturn_item (
    xfreturn_id integer NOT NULL,
    inventory_id integer NOT NULL,
    item_id integer NOT NULL,
    usable_qty numeric(12,2) NOT NULL,
    defective_qty numeric(12,2) NOT NULL,
    expired_qty numeric(12,2) NOT NULL,
    uom_code character varying(25) NOT NULL,
    reason_text character varying(255),
    create_by_id character varying(20) NOT NULL,
    create_dtime timestamp(0) without time zone NOT NULL,
    update_by_id character varying(20) NOT NULL,
    update_dtime timestamp(0) without time zone NOT NULL,
    version_nbr integer NOT NULL,
    CONSTRAINT xfreturn_item_defective_qty_check CHECK ((defective_qty >= 0.00)),
    CONSTRAINT xfreturn_item_expired_qty_check CHECK ((expired_qty >= 0.00)),
    CONSTRAINT xfreturn_item_usable_qty_check CHECK ((usable_qty >= 0.00))
);


--
-- Name: xfreturn_xfreturn_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.xfreturn_xfreturn_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: xfreturn_xfreturn_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.xfreturn_xfreturn_id_seq OWNED BY public.xfreturn.xfreturn_id;


--
-- Name: dispatch_manifest id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dispatch_manifest ALTER COLUMN id SET DEFAULT nextval('public.dispatch_manifest_id_seq'::regclass);


--
-- Name: distribution_package id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.distribution_package ALTER COLUMN id SET DEFAULT nextval('public.distribution_package_id_seq'::regclass);


--
-- Name: distribution_package_item id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.distribution_package_item ALTER COLUMN id SET DEFAULT nextval('public.distribution_package_item_id_seq'::regclass);


--
-- Name: fulfilment id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fulfilment ALTER COLUMN id SET DEFAULT nextval('public.fulfilment_id_seq'::regclass);


--
-- Name: fulfilment_edit_log id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fulfilment_edit_log ALTER COLUMN id SET DEFAULT nextval('public.fulfilment_edit_log_id_seq'::regclass);


--
-- Name: fulfilment_line_item id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fulfilment_line_item ALTER COLUMN id SET DEFAULT nextval('public.fulfilment_line_item_id_seq'::regclass);


--
-- Name: needs_list id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.needs_list ALTER COLUMN id SET DEFAULT nextval('public.needs_list_id_seq'::regclass);


--
-- Name: needs_list_item id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.needs_list_item ALTER COLUMN id SET DEFAULT nextval('public.needs_list_item_id_seq'::regclass);


--
-- Name: notification id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.notification ALTER COLUMN id SET DEFAULT nextval('public.notification_id_seq'::regclass);


--
-- Name: receipt_record id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.receipt_record ALTER COLUMN id SET DEFAULT nextval('public.receipt_record_id_seq'::regclass);


--
-- Name: role id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.role ALTER COLUMN id SET DEFAULT nextval('public.role_id_seq'::regclass);


--
-- Name: transaction id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transaction ALTER COLUMN id SET DEFAULT nextval('public.transaction_id_seq'::regclass);


--
-- Name: transfer_request id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transfer_request ALTER COLUMN id SET DEFAULT nextval('public.transfer_request_id_seq'::regclass);


--
-- Name: user id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public."user" ALTER COLUMN id SET DEFAULT nextval('public.user_id_seq'::regclass);


--
-- Name: xfreturn xfreturn_id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.xfreturn ALTER COLUMN xfreturn_id SET DEFAULT nextval('public.xfreturn_xfreturn_id_seq'::regclass);


--
-- Name: agency agency_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.agency
    ADD CONSTRAINT agency_pkey PRIMARY KEY (agency_id);


--
-- Name: country country_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.country
    ADD CONSTRAINT country_pkey PRIMARY KEY (country_id);


--
-- Name: custodian custodian_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.custodian
    ADD CONSTRAINT custodian_pkey PRIMARY KEY (custodian_id);


--
-- Name: dbintake_item dbintake_item_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dbintake_item
    ADD CONSTRAINT dbintake_item_pkey PRIMARY KEY (reliefpkg_id, inventory_id, item_id);


--
-- Name: dbintake dbintake_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dbintake
    ADD CONSTRAINT dbintake_pkey PRIMARY KEY (reliefpkg_id, inventory_id);


--
-- Name: dispatch_manifest dispatch_manifest_manifest_number_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dispatch_manifest
    ADD CONSTRAINT dispatch_manifest_manifest_number_key UNIQUE (manifest_number);


--
-- Name: dispatch_manifest dispatch_manifest_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dispatch_manifest
    ADD CONSTRAINT dispatch_manifest_pkey PRIMARY KEY (id);


--
-- Name: distribution_package_item distribution_package_item_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.distribution_package_item
    ADD CONSTRAINT distribution_package_item_pkey PRIMARY KEY (id);


--
-- Name: distribution_package distribution_package_package_number_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.distribution_package
    ADD CONSTRAINT distribution_package_package_number_key UNIQUE (package_number);


--
-- Name: distribution_package distribution_package_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.distribution_package
    ADD CONSTRAINT distribution_package_pkey PRIMARY KEY (id);


--
-- Name: dnintake_item dnintake_item_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dnintake_item
    ADD CONSTRAINT dnintake_item_pkey PRIMARY KEY (donation_id, inventory_id, item_id);


--
-- Name: dnintake dnintake_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dnintake
    ADD CONSTRAINT dnintake_pkey PRIMARY KEY (donation_id, inventory_id);


--
-- Name: donation_item donation_item_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.donation_item
    ADD CONSTRAINT donation_item_pkey PRIMARY KEY (donation_id, item_id);


--
-- Name: donation donation_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.donation
    ADD CONSTRAINT donation_pkey PRIMARY KEY (donation_id);


--
-- Name: donor donor_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.donor
    ADD CONSTRAINT donor_pkey PRIMARY KEY (donor_id);


--
-- Name: event event_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.event
    ADD CONSTRAINT event_pkey PRIMARY KEY (event_id);


--
-- Name: fulfilment_edit_log fulfilment_edit_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fulfilment_edit_log
    ADD CONSTRAINT fulfilment_edit_log_pkey PRIMARY KEY (id);


--
-- Name: fulfilment fulfilment_fulfilment_number_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fulfilment
    ADD CONSTRAINT fulfilment_fulfilment_number_key UNIQUE (fulfilment_number);


--
-- Name: fulfilment_line_item fulfilment_line_item_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fulfilment_line_item
    ADD CONSTRAINT fulfilment_line_item_pkey PRIMARY KEY (id);


--
-- Name: fulfilment fulfilment_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fulfilment
    ADD CONSTRAINT fulfilment_pkey PRIMARY KEY (id);


--
-- Name: inventory inventory_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.inventory
    ADD CONSTRAINT inventory_pkey PRIMARY KEY (inventory_id);


--
-- Name: item_location item_location_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.item_location
    ADD CONSTRAINT item_location_pkey PRIMARY KEY (item_id, location_id);


--
-- Name: item item_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.item
    ADD CONSTRAINT item_pkey PRIMARY KEY (item_id);


--
-- Name: itemcatg itemcatg_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.itemcatg
    ADD CONSTRAINT itemcatg_pkey PRIMARY KEY (category_code);


--
-- Name: location location_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.location
    ADD CONSTRAINT location_pkey PRIMARY KEY (location_id);


--
-- Name: needs_list_item needs_list_item_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.needs_list_item
    ADD CONSTRAINT needs_list_item_pkey PRIMARY KEY (id);


--
-- Name: needs_list needs_list_list_number_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.needs_list
    ADD CONSTRAINT needs_list_list_number_key UNIQUE (list_number);


--
-- Name: needs_list needs_list_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.needs_list
    ADD CONSTRAINT needs_list_pkey PRIMARY KEY (id);


--
-- Name: notification notification_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.notification
    ADD CONSTRAINT notification_pkey PRIMARY KEY (id);


--
-- Name: parish parish_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.parish
    ADD CONSTRAINT parish_pkey PRIMARY KEY (parish_code);


--
-- Name: rtintake pk_rtintake; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.rtintake
    ADD CONSTRAINT pk_rtintake PRIMARY KEY (xfreturn_id, inventory_id);


--
-- Name: rtintake_item pk_rtintake_item; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.rtintake_item
    ADD CONSTRAINT pk_rtintake_item PRIMARY KEY (xfreturn_id, inventory_id, item_id);


--
-- Name: xfintake pk_xfintake; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.xfintake
    ADD CONSTRAINT pk_xfintake PRIMARY KEY (transfer_id, inventory_id);


--
-- Name: xfintake_item pk_xfintake_item; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.xfintake_item
    ADD CONSTRAINT pk_xfintake_item PRIMARY KEY (transfer_id, inventory_id, item_id);


--
-- Name: xfreturn_item pk_xfreturn_item; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.xfreturn_item
    ADD CONSTRAINT pk_xfreturn_item PRIMARY KEY (xfreturn_id, inventory_id, item_id);


--
-- Name: receipt_record receipt_record_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.receipt_record
    ADD CONSTRAINT receipt_record_pkey PRIMARY KEY (id);


--
-- Name: receipt_record receipt_record_receipt_number_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.receipt_record
    ADD CONSTRAINT receipt_record_receipt_number_key UNIQUE (receipt_number);


--
-- Name: reliefpkg_item reliefpkg_item_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.reliefpkg_item
    ADD CONSTRAINT reliefpkg_item_pkey PRIMARY KEY (reliefpkg_id, fr_inventory_id, item_id);


--
-- Name: reliefpkg reliefpkg_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.reliefpkg
    ADD CONSTRAINT reliefpkg_pkey PRIMARY KEY (reliefpkg_id);


--
-- Name: reliefrqst_item reliefrqst_item_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.reliefrqst_item
    ADD CONSTRAINT reliefrqst_item_pkey PRIMARY KEY (reliefrqst_id, item_id);


--
-- Name: reliefrqst reliefrqst_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.reliefrqst
    ADD CONSTRAINT reliefrqst_pkey PRIMARY KEY (reliefrqst_id);


--
-- Name: role role_code_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.role
    ADD CONSTRAINT role_code_key UNIQUE (code);


--
-- Name: role role_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.role
    ADD CONSTRAINT role_pkey PRIMARY KEY (id);


--
-- Name: transaction transaction_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT transaction_pkey PRIMARY KEY (id);


--
-- Name: transfer_item transfer_item_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transfer_item
    ADD CONSTRAINT transfer_item_pkey PRIMARY KEY (transfer_id, item_id);


--
-- Name: transfer transfer_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transfer
    ADD CONSTRAINT transfer_pkey PRIMARY KEY (transfer_id);


--
-- Name: transfer_request transfer_request_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transfer_request
    ADD CONSTRAINT transfer_request_pkey PRIMARY KEY (id);


--
-- Name: agency uk_agency_1; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.agency
    ADD CONSTRAINT uk_agency_1 UNIQUE (agency_name);


--
-- Name: custodian uk_custodian_1; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.custodian
    ADD CONSTRAINT uk_custodian_1 UNIQUE (custodian_name);


--
-- Name: donor uk_donor_1; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.donor
    ADD CONSTRAINT uk_donor_1 UNIQUE (donor_name);


--
-- Name: item uk_item_1; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.item
    ADD CONSTRAINT uk_item_1 UNIQUE (item_name);


--
-- Name: item uk_item_2; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.item
    ADD CONSTRAINT uk_item_2 UNIQUE (sku_code);


--
-- Name: unitofmeasure unitofmeasure_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.unitofmeasure
    ADD CONSTRAINT unitofmeasure_pkey PRIMARY KEY (uom_code);


--
-- Name: user user_email_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public."user"
    ADD CONSTRAINT user_email_key UNIQUE (email);


--
-- Name: user user_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public."user"
    ADD CONSTRAINT user_pkey PRIMARY KEY (id);


--
-- Name: user_role user_role_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_role
    ADD CONSTRAINT user_role_pkey PRIMARY KEY (user_id, role_id);


--
-- Name: user_warehouse user_warehouse_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_warehouse
    ADD CONSTRAINT user_warehouse_pkey PRIMARY KEY (user_id, warehouse_id);


--
-- Name: warehouse warehouse_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.warehouse
    ADD CONSTRAINT warehouse_pkey PRIMARY KEY (warehouse_id);


--
-- Name: xfreturn xfreturn_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.xfreturn
    ADD CONSTRAINT xfreturn_pkey PRIMARY KEY (xfreturn_id);


--
-- Name: dk_dbintake_item_1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_dbintake_item_1 ON public.dbintake_item USING btree (inventory_id, item_id);


--
-- Name: dk_dbintake_item_2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_dbintake_item_2 ON public.dbintake_item USING btree (item_id);


--
-- Name: dk_dnintake_item_1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_dnintake_item_1 ON public.dnintake_item USING btree (inventory_id, item_id);


--
-- Name: dk_dnintake_item_2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_dnintake_item_2 ON public.dnintake_item USING btree (item_id);


--
-- Name: dk_inventory_1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_inventory_1 ON public.inventory USING btree (warehouse_id);


--
-- Name: dk_item_1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_item_1 ON public.item USING btree (item_desc);


--
-- Name: dk_item_location_1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_item_location_1 ON public.item_location USING btree (inventory_id, location_id);


--
-- Name: dk_location_1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_location_1 ON public.location USING btree (inventory_id);


--
-- Name: dk_reliefpkg_1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_reliefpkg_1 ON public.reliefpkg USING btree (start_date);


--
-- Name: dk_reliefpkg_3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_reliefpkg_3 ON public.reliefpkg USING btree (to_inventory_id);


--
-- Name: dk_reliefpkg_item_1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_reliefpkg_item_1 ON public.reliefpkg_item USING btree (fr_inventory_id, item_id);


--
-- Name: dk_reliefpkg_item_2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_reliefpkg_item_2 ON public.reliefpkg_item USING btree (item_id);


--
-- Name: dk_reliefrqst_1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_reliefrqst_1 ON public.reliefrqst USING btree (agency_id, request_date);


--
-- Name: dk_reliefrqst_2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_reliefrqst_2 ON public.reliefrqst USING btree (request_date, status_code);


--
-- Name: dk_reliefrqst_3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_reliefrqst_3 ON public.reliefrqst USING btree (status_code, urgency_ind);


--
-- Name: dk_reliefrqst_item_2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_reliefrqst_item_2 ON public.reliefrqst_item USING btree (item_id, urgency_ind);


--
-- Name: dk_rtintake_item_1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_rtintake_item_1 ON public.rtintake_item USING btree (inventory_id, item_id);


--
-- Name: dk_rtintake_item_2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_rtintake_item_2 ON public.rtintake_item USING btree (item_id);


--
-- Name: dk_transfer_1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_transfer_1 ON public.transfer USING btree (transfer_date);


--
-- Name: dk_transfer_2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_transfer_2 ON public.transfer USING btree (fr_inventory_id);


--
-- Name: dk_transfer_3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_transfer_3 ON public.transfer USING btree (to_inventory_id);


--
-- Name: dk_transfer_item_1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_transfer_item_1 ON public.transfer_item USING btree (item_id);


--
-- Name: dk_xfintake_item_1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_xfintake_item_1 ON public.xfintake_item USING btree (inventory_id, item_id);


--
-- Name: dk_xfintake_item_2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_xfintake_item_2 ON public.xfintake_item USING btree (item_id);


--
-- Name: dk_xfreturn_1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_xfreturn_1 ON public.xfreturn USING btree (return_date);


--
-- Name: dk_xfreturn_2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_xfreturn_2 ON public.xfreturn USING btree (fr_inventory_id);


--
-- Name: dk_xfreturn_3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX dk_xfreturn_3 ON public.xfreturn USING btree (to_inventory_id);


--
-- Name: idx_dispatch_manifest_from; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_dispatch_manifest_from ON public.dispatch_manifest USING btree (from_warehouse_id);


--
-- Name: idx_dispatch_manifest_fulfilment; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_dispatch_manifest_fulfilment ON public.dispatch_manifest USING btree (fulfilment_id);


--
-- Name: idx_dispatch_manifest_to; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_dispatch_manifest_to ON public.dispatch_manifest USING btree (to_warehouse_id);


--
-- Name: idx_distribution_package_agency; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_distribution_package_agency ON public.distribution_package USING btree (recipient_agency_id);


--
-- Name: idx_distribution_package_event; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_distribution_package_event ON public.distribution_package USING btree (event_id);


--
-- Name: idx_distribution_package_item_item; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_distribution_package_item_item ON public.distribution_package_item USING btree (item_id);


--
-- Name: idx_distribution_package_item_package; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_distribution_package_item_package ON public.distribution_package_item USING btree (package_id);


--
-- Name: idx_distribution_package_warehouse; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_distribution_package_warehouse ON public.distribution_package USING btree (assigned_warehouse_id);


--
-- Name: idx_fulfilment_edit_log_fulfilment; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_fulfilment_edit_log_fulfilment ON public.fulfilment_edit_log USING btree (fulfilment_id);


--
-- Name: idx_fulfilment_line_item_fulfilment; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_fulfilment_line_item_fulfilment ON public.fulfilment_line_item USING btree (fulfilment_id);


--
-- Name: idx_fulfilment_line_item_item; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_fulfilment_line_item_item ON public.fulfilment_line_item USING btree (item_id);


--
-- Name: idx_fulfilment_line_item_warehouse; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_fulfilment_line_item_warehouse ON public.fulfilment_line_item USING btree (source_warehouse_id);


--
-- Name: idx_fulfilment_needs_list; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_fulfilment_needs_list ON public.fulfilment USING btree (needs_list_id);


--
-- Name: idx_fulfilment_number; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_fulfilment_number ON public.fulfilment USING btree (fulfilment_number);


--
-- Name: idx_fulfilment_status; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_fulfilment_status ON public.fulfilment USING btree (status);


--
-- Name: idx_needs_list_agency; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_needs_list_agency ON public.needs_list USING btree (agency_id);


--
-- Name: idx_needs_list_event; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_needs_list_event ON public.needs_list USING btree (event_id);


--
-- Name: idx_needs_list_item_item; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_needs_list_item_item ON public.needs_list_item USING btree (item_id);


--
-- Name: idx_needs_list_item_list; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_needs_list_item_list ON public.needs_list_item USING btree (needs_list_id);


--
-- Name: idx_needs_list_number; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_needs_list_number ON public.needs_list USING btree (list_number);


--
-- Name: idx_needs_list_status; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_needs_list_status ON public.needs_list USING btree (status);


--
-- Name: idx_notification_user_status; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_notification_user_status ON public.notification USING btree (user_id, status, created_at);


--
-- Name: idx_notification_warehouse; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_notification_warehouse ON public.notification USING btree (warehouse_id, created_at);


--
-- Name: idx_receipt_record_fulfilment; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_receipt_record_fulfilment ON public.receipt_record USING btree (fulfilment_id);


--
-- Name: idx_role_code; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_role_code ON public.role USING btree (code);


--
-- Name: idx_user_email; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_user_email ON public."user" USING btree (email);


--
-- Name: uk_inventory_1; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX uk_inventory_1 ON public.inventory USING btree (item_id, inventory_id);


--
-- Name: uk_inventory_2; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX uk_inventory_2 ON public.inventory USING btree (item_id) WHERE (usable_qty > 0.00);


--
-- Name: agency agency_ineligible_event_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.agency
    ADD CONSTRAINT agency_ineligible_event_id_fkey FOREIGN KEY (ineligible_event_id) REFERENCES public.event(event_id);


--
-- Name: agency agency_parish_code_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.agency
    ADD CONSTRAINT agency_parish_code_fkey FOREIGN KEY (parish_code) REFERENCES public.parish(parish_code);


--
-- Name: custodian custodian_parish_code_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.custodian
    ADD CONSTRAINT custodian_parish_code_fkey FOREIGN KEY (parish_code) REFERENCES public.parish(parish_code);


--
-- Name: dbintake dbintake_inventory_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dbintake
    ADD CONSTRAINT dbintake_inventory_id_fkey FOREIGN KEY (inventory_id) REFERENCES public.inventory(inventory_id);


--
-- Name: dbintake_item dbintake_item_location1_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dbintake_item
    ADD CONSTRAINT dbintake_item_location1_id_fkey FOREIGN KEY (location1_id) REFERENCES public.location(location_id);


--
-- Name: dbintake_item dbintake_item_location2_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dbintake_item
    ADD CONSTRAINT dbintake_item_location2_id_fkey FOREIGN KEY (location2_id) REFERENCES public.location(location_id);


--
-- Name: dbintake_item dbintake_item_location3_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dbintake_item
    ADD CONSTRAINT dbintake_item_location3_id_fkey FOREIGN KEY (location3_id) REFERENCES public.location(location_id);


--
-- Name: dbintake_item dbintake_item_reliefpkg_id_inventory_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dbintake_item
    ADD CONSTRAINT dbintake_item_reliefpkg_id_inventory_id_fkey FOREIGN KEY (reliefpkg_id, inventory_id) REFERENCES public.dbintake(reliefpkg_id, inventory_id);


--
-- Name: dbintake_item dbintake_item_uom_code_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dbintake_item
    ADD CONSTRAINT dbintake_item_uom_code_fkey FOREIGN KEY (uom_code) REFERENCES public.unitofmeasure(uom_code);


--
-- Name: dbintake dbintake_reliefpkg_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dbintake
    ADD CONSTRAINT dbintake_reliefpkg_id_fkey FOREIGN KEY (reliefpkg_id) REFERENCES public.reliefpkg(reliefpkg_id);


--
-- Name: dispatch_manifest dispatch_manifest_from_warehouse_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dispatch_manifest
    ADD CONSTRAINT dispatch_manifest_from_warehouse_id_fkey FOREIGN KEY (from_warehouse_id) REFERENCES public.warehouse(warehouse_id);


--
-- Name: dispatch_manifest dispatch_manifest_fulfilment_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dispatch_manifest
    ADD CONSTRAINT dispatch_manifest_fulfilment_id_fkey FOREIGN KEY (fulfilment_id) REFERENCES public.fulfilment(id);


--
-- Name: dispatch_manifest dispatch_manifest_to_warehouse_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dispatch_manifest
    ADD CONSTRAINT dispatch_manifest_to_warehouse_id_fkey FOREIGN KEY (to_warehouse_id) REFERENCES public.warehouse(warehouse_id);


--
-- Name: distribution_package distribution_package_assigned_warehouse_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.distribution_package
    ADD CONSTRAINT distribution_package_assigned_warehouse_id_fkey FOREIGN KEY (assigned_warehouse_id) REFERENCES public.warehouse(warehouse_id);


--
-- Name: distribution_package distribution_package_event_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.distribution_package
    ADD CONSTRAINT distribution_package_event_id_fkey FOREIGN KEY (event_id) REFERENCES public.event(event_id);


--
-- Name: distribution_package_item distribution_package_item_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.distribution_package_item
    ADD CONSTRAINT distribution_package_item_item_id_fkey FOREIGN KEY (item_id) REFERENCES public.item(item_id);


--
-- Name: distribution_package_item distribution_package_item_package_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.distribution_package_item
    ADD CONSTRAINT distribution_package_item_package_id_fkey FOREIGN KEY (package_id) REFERENCES public.distribution_package(id) ON DELETE CASCADE;


--
-- Name: distribution_package distribution_package_recipient_agency_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.distribution_package
    ADD CONSTRAINT distribution_package_recipient_agency_id_fkey FOREIGN KEY (recipient_agency_id) REFERENCES public.agency(agency_id);


--
-- Name: dnintake dnintake_donation_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dnintake
    ADD CONSTRAINT dnintake_donation_id_fkey FOREIGN KEY (donation_id) REFERENCES public.donation(donation_id);


--
-- Name: dnintake dnintake_inventory_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dnintake
    ADD CONSTRAINT dnintake_inventory_id_fkey FOREIGN KEY (inventory_id) REFERENCES public.inventory(inventory_id);


--
-- Name: dnintake_item dnintake_item_donation_id_inventory_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dnintake_item
    ADD CONSTRAINT dnintake_item_donation_id_inventory_id_fkey FOREIGN KEY (donation_id, inventory_id) REFERENCES public.dnintake(donation_id, inventory_id);


--
-- Name: dnintake_item dnintake_item_location1_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dnintake_item
    ADD CONSTRAINT dnintake_item_location1_id_fkey FOREIGN KEY (location1_id) REFERENCES public.location(location_id);


--
-- Name: dnintake_item dnintake_item_location2_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dnintake_item
    ADD CONSTRAINT dnintake_item_location2_id_fkey FOREIGN KEY (location2_id) REFERENCES public.location(location_id);


--
-- Name: dnintake_item dnintake_item_location3_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dnintake_item
    ADD CONSTRAINT dnintake_item_location3_id_fkey FOREIGN KEY (location3_id) REFERENCES public.location(location_id);


--
-- Name: dnintake_item dnintake_item_uom_code_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.dnintake_item
    ADD CONSTRAINT dnintake_item_uom_code_fkey FOREIGN KEY (uom_code) REFERENCES public.unitofmeasure(uom_code);


--
-- Name: donation donation_custodian_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.donation
    ADD CONSTRAINT donation_custodian_id_fkey FOREIGN KEY (custodian_id) REFERENCES public.custodian(custodian_id);


--
-- Name: donation donation_donor_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.donation
    ADD CONSTRAINT donation_donor_id_fkey FOREIGN KEY (donor_id) REFERENCES public.donor(donor_id);


--
-- Name: donation donation_event_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.donation
    ADD CONSTRAINT donation_event_id_fkey FOREIGN KEY (event_id) REFERENCES public.event(event_id);


--
-- Name: donation_item donation_item_donation_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.donation_item
    ADD CONSTRAINT donation_item_donation_id_fkey FOREIGN KEY (donation_id) REFERENCES public.donation(donation_id);


--
-- Name: donation_item donation_item_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.donation_item
    ADD CONSTRAINT donation_item_item_id_fkey FOREIGN KEY (item_id) REFERENCES public.item(item_id);


--
-- Name: donation_item donation_item_uom_code_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.donation_item
    ADD CONSTRAINT donation_item_uom_code_fkey FOREIGN KEY (uom_code) REFERENCES public.unitofmeasure(uom_code);


--
-- Name: donor donor_country_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.donor
    ADD CONSTRAINT donor_country_id_fkey FOREIGN KEY (country_id) REFERENCES public.country(country_id);


--
-- Name: rtintake_item fk_rtintake_item_intake; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.rtintake_item
    ADD CONSTRAINT fk_rtintake_item_intake FOREIGN KEY (xfreturn_id, inventory_id) REFERENCES public.rtintake(xfreturn_id, inventory_id);


--
-- Name: xfintake_item fk_xfintake_item_intake; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.xfintake_item
    ADD CONSTRAINT fk_xfintake_item_intake FOREIGN KEY (transfer_id, inventory_id) REFERENCES public.xfintake(transfer_id, inventory_id);


--
-- Name: xfreturn_item fk_xfreturn_item_inventory; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.xfreturn_item
    ADD CONSTRAINT fk_xfreturn_item_inventory FOREIGN KEY (item_id, inventory_id) REFERENCES public.inventory(item_id, inventory_id);


--
-- Name: fulfilment_edit_log fulfilment_edit_log_fulfilment_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fulfilment_edit_log
    ADD CONSTRAINT fulfilment_edit_log_fulfilment_id_fkey FOREIGN KEY (fulfilment_id) REFERENCES public.fulfilment(id);


--
-- Name: fulfilment_edit_log fulfilment_edit_log_line_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fulfilment_edit_log
    ADD CONSTRAINT fulfilment_edit_log_line_item_id_fkey FOREIGN KEY (line_item_id) REFERENCES public.fulfilment_line_item(id);


--
-- Name: fulfilment_line_item fulfilment_line_item_fulfilment_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fulfilment_line_item
    ADD CONSTRAINT fulfilment_line_item_fulfilment_id_fkey FOREIGN KEY (fulfilment_id) REFERENCES public.fulfilment(id) ON DELETE CASCADE;


--
-- Name: fulfilment_line_item fulfilment_line_item_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fulfilment_line_item
    ADD CONSTRAINT fulfilment_line_item_item_id_fkey FOREIGN KEY (item_id) REFERENCES public.item(item_id);


--
-- Name: fulfilment_line_item fulfilment_line_item_source_warehouse_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fulfilment_line_item
    ADD CONSTRAINT fulfilment_line_item_source_warehouse_id_fkey FOREIGN KEY (source_warehouse_id) REFERENCES public.warehouse(warehouse_id);


--
-- Name: fulfilment fulfilment_needs_list_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fulfilment
    ADD CONSTRAINT fulfilment_needs_list_id_fkey FOREIGN KEY (needs_list_id) REFERENCES public.needs_list(id);


--
-- Name: inventory inventory_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.inventory
    ADD CONSTRAINT inventory_item_id_fkey FOREIGN KEY (item_id) REFERENCES public.item(item_id);


--
-- Name: inventory inventory_uom_code_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.inventory
    ADD CONSTRAINT inventory_uom_code_fkey FOREIGN KEY (uom_code) REFERENCES public.unitofmeasure(uom_code);


--
-- Name: inventory inventory_warehouse_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.inventory
    ADD CONSTRAINT inventory_warehouse_id_fkey FOREIGN KEY (warehouse_id) REFERENCES public.warehouse(warehouse_id);


--
-- Name: item item_category_code_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.item
    ADD CONSTRAINT item_category_code_fkey FOREIGN KEY (category_code) REFERENCES public.itemcatg(category_code);


--
-- Name: item item_default_uom_code_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.item
    ADD CONSTRAINT item_default_uom_code_fkey FOREIGN KEY (default_uom_code) REFERENCES public.unitofmeasure(uom_code);


--
-- Name: item_location item_location_item_id_inventory_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.item_location
    ADD CONSTRAINT item_location_item_id_inventory_id_fkey FOREIGN KEY (item_id, inventory_id) REFERENCES public.inventory(item_id, inventory_id);


--
-- Name: item_location item_location_location_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.item_location
    ADD CONSTRAINT item_location_location_id_fkey FOREIGN KEY (location_id) REFERENCES public.location(location_id);


--
-- Name: location location_inventory_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.location
    ADD CONSTRAINT location_inventory_id_fkey FOREIGN KEY (inventory_id) REFERENCES public.inventory(inventory_id);


--
-- Name: needs_list needs_list_agency_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.needs_list
    ADD CONSTRAINT needs_list_agency_id_fkey FOREIGN KEY (agency_id) REFERENCES public.agency(agency_id);


--
-- Name: needs_list needs_list_event_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.needs_list
    ADD CONSTRAINT needs_list_event_id_fkey FOREIGN KEY (event_id) REFERENCES public.event(event_id);


--
-- Name: needs_list_item needs_list_item_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.needs_list_item
    ADD CONSTRAINT needs_list_item_item_id_fkey FOREIGN KEY (item_id) REFERENCES public.item(item_id);


--
-- Name: needs_list_item needs_list_item_needs_list_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.needs_list_item
    ADD CONSTRAINT needs_list_item_needs_list_id_fkey FOREIGN KEY (needs_list_id) REFERENCES public.needs_list(id) ON DELETE CASCADE;


--
-- Name: notification notification_reliefrqst_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.notification
    ADD CONSTRAINT notification_reliefrqst_id_fkey FOREIGN KEY (reliefrqst_id) REFERENCES public.reliefrqst(reliefrqst_id);


--
-- Name: notification notification_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.notification
    ADD CONSTRAINT notification_user_id_fkey FOREIGN KEY (user_id) REFERENCES public."user"(id);


--
-- Name: notification notification_warehouse_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.notification
    ADD CONSTRAINT notification_warehouse_id_fkey FOREIGN KEY (warehouse_id) REFERENCES public.warehouse(warehouse_id);


--
-- Name: receipt_record receipt_record_fulfilment_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.receipt_record
    ADD CONSTRAINT receipt_record_fulfilment_id_fkey FOREIGN KEY (fulfilment_id) REFERENCES public.fulfilment(id);


--
-- Name: reliefpkg_item reliefpkg_item_item_id_fr_inventory_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.reliefpkg_item
    ADD CONSTRAINT reliefpkg_item_item_id_fr_inventory_id_fkey FOREIGN KEY (item_id, fr_inventory_id) REFERENCES public.inventory(item_id, inventory_id);


--
-- Name: reliefpkg_item reliefpkg_item_reliefpkg_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.reliefpkg_item
    ADD CONSTRAINT reliefpkg_item_reliefpkg_id_fkey FOREIGN KEY (reliefpkg_id) REFERENCES public.reliefpkg(reliefpkg_id);


--
-- Name: reliefpkg_item reliefpkg_item_uom_code_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.reliefpkg_item
    ADD CONSTRAINT reliefpkg_item_uom_code_fkey FOREIGN KEY (uom_code) REFERENCES public.unitofmeasure(uom_code);


--
-- Name: reliefpkg reliefpkg_reliefrqst_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.reliefpkg
    ADD CONSTRAINT reliefpkg_reliefrqst_id_fkey FOREIGN KEY (reliefrqst_id) REFERENCES public.reliefrqst(reliefrqst_id);


--
-- Name: reliefpkg reliefpkg_to_inventory_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.reliefpkg
    ADD CONSTRAINT reliefpkg_to_inventory_id_fkey FOREIGN KEY (to_inventory_id) REFERENCES public.inventory(inventory_id);


--
-- Name: reliefrqst reliefrqst_agency_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.reliefrqst
    ADD CONSTRAINT reliefrqst_agency_id_fkey FOREIGN KEY (agency_id) REFERENCES public.agency(agency_id);


--
-- Name: reliefrqst reliefrqst_eligible_event_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.reliefrqst
    ADD CONSTRAINT reliefrqst_eligible_event_id_fkey FOREIGN KEY (eligible_event_id) REFERENCES public.event(event_id);


--
-- Name: reliefrqst_item reliefrqst_item_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.reliefrqst_item
    ADD CONSTRAINT reliefrqst_item_item_id_fkey FOREIGN KEY (item_id) REFERENCES public.item(item_id);


--
-- Name: reliefrqst_item reliefrqst_item_reliefrqst_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.reliefrqst_item
    ADD CONSTRAINT reliefrqst_item_reliefrqst_id_fkey FOREIGN KEY (reliefrqst_id) REFERENCES public.reliefrqst(reliefrqst_id);


--
-- Name: rtintake rtintake_inventory_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.rtintake
    ADD CONSTRAINT rtintake_inventory_id_fkey FOREIGN KEY (inventory_id) REFERENCES public.inventory(inventory_id);


--
-- Name: rtintake_item rtintake_item_location1_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.rtintake_item
    ADD CONSTRAINT rtintake_item_location1_id_fkey FOREIGN KEY (location1_id) REFERENCES public.location(location_id);


--
-- Name: rtintake_item rtintake_item_location2_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.rtintake_item
    ADD CONSTRAINT rtintake_item_location2_id_fkey FOREIGN KEY (location2_id) REFERENCES public.location(location_id);


--
-- Name: rtintake_item rtintake_item_location3_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.rtintake_item
    ADD CONSTRAINT rtintake_item_location3_id_fkey FOREIGN KEY (location3_id) REFERENCES public.location(location_id);


--
-- Name: rtintake_item rtintake_item_uom_code_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.rtintake_item
    ADD CONSTRAINT rtintake_item_uom_code_fkey FOREIGN KEY (uom_code) REFERENCES public.unitofmeasure(uom_code);


--
-- Name: rtintake rtintake_xfreturn_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.rtintake
    ADD CONSTRAINT rtintake_xfreturn_id_fkey FOREIGN KEY (xfreturn_id) REFERENCES public.xfreturn(xfreturn_id);


--
-- Name: transaction transaction_donor_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT transaction_donor_id_fkey FOREIGN KEY (donor_id) REFERENCES public.donor(donor_id);


--
-- Name: transaction transaction_event_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT transaction_event_id_fkey FOREIGN KEY (event_id) REFERENCES public.event(event_id);


--
-- Name: transaction transaction_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT transaction_item_id_fkey FOREIGN KEY (item_id) REFERENCES public.item(item_id);


--
-- Name: transaction transaction_warehouse_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT transaction_warehouse_id_fkey FOREIGN KEY (warehouse_id) REFERENCES public.warehouse(warehouse_id);


--
-- Name: transfer transfer_event_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transfer
    ADD CONSTRAINT transfer_event_id_fkey FOREIGN KEY (event_id) REFERENCES public.event(event_id);


--
-- Name: transfer transfer_fr_inventory_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transfer
    ADD CONSTRAINT transfer_fr_inventory_id_fkey FOREIGN KEY (fr_inventory_id) REFERENCES public.inventory(inventory_id);


--
-- Name: transfer_item transfer_item_transfer_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transfer_item
    ADD CONSTRAINT transfer_item_transfer_id_fkey FOREIGN KEY (transfer_id) REFERENCES public.transfer(transfer_id);


--
-- Name: transfer_item transfer_item_uom_code_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transfer_item
    ADD CONSTRAINT transfer_item_uom_code_fkey FOREIGN KEY (uom_code) REFERENCES public.unitofmeasure(uom_code);


--
-- Name: transfer_request transfer_request_from_warehouse_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transfer_request
    ADD CONSTRAINT transfer_request_from_warehouse_id_fkey FOREIGN KEY (from_warehouse_id) REFERENCES public.warehouse(warehouse_id);


--
-- Name: transfer_request transfer_request_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transfer_request
    ADD CONSTRAINT transfer_request_item_id_fkey FOREIGN KEY (item_id) REFERENCES public.item(item_id);


--
-- Name: transfer_request transfer_request_requested_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transfer_request
    ADD CONSTRAINT transfer_request_requested_by_fkey FOREIGN KEY (requested_by) REFERENCES public."user"(id);


--
-- Name: transfer_request transfer_request_reviewed_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transfer_request
    ADD CONSTRAINT transfer_request_reviewed_by_fkey FOREIGN KEY (reviewed_by) REFERENCES public."user"(id);


--
-- Name: transfer_request transfer_request_to_warehouse_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transfer_request
    ADD CONSTRAINT transfer_request_to_warehouse_id_fkey FOREIGN KEY (to_warehouse_id) REFERENCES public.warehouse(warehouse_id);


--
-- Name: transfer transfer_to_inventory_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.transfer
    ADD CONSTRAINT transfer_to_inventory_id_fkey FOREIGN KEY (to_inventory_id) REFERENCES public.inventory(inventory_id);


--
-- Name: user user_assigned_warehouse_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public."user"
    ADD CONSTRAINT user_assigned_warehouse_id_fkey FOREIGN KEY (assigned_warehouse_id) REFERENCES public.warehouse(warehouse_id);


--
-- Name: user user_created_by_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public."user"
    ADD CONSTRAINT user_created_by_id_fkey FOREIGN KEY (created_by_id) REFERENCES public."user"(id);


--
-- Name: user_role user_role_assigned_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_role
    ADD CONSTRAINT user_role_assigned_by_fkey FOREIGN KEY (assigned_by) REFERENCES public."user"(id);


--
-- Name: user_role user_role_role_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_role
    ADD CONSTRAINT user_role_role_id_fkey FOREIGN KEY (role_id) REFERENCES public.role(id) ON DELETE CASCADE;


--
-- Name: user_role user_role_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_role
    ADD CONSTRAINT user_role_user_id_fkey FOREIGN KEY (user_id) REFERENCES public."user"(id) ON DELETE CASCADE;


--
-- Name: user user_updated_by_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public."user"
    ADD CONSTRAINT user_updated_by_id_fkey FOREIGN KEY (updated_by_id) REFERENCES public."user"(id);


--
-- Name: user_warehouse user_warehouse_assigned_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_warehouse
    ADD CONSTRAINT user_warehouse_assigned_by_fkey FOREIGN KEY (assigned_by) REFERENCES public."user"(id);


--
-- Name: user_warehouse user_warehouse_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_warehouse
    ADD CONSTRAINT user_warehouse_user_id_fkey FOREIGN KEY (user_id) REFERENCES public."user"(id) ON DELETE CASCADE;


--
-- Name: user_warehouse user_warehouse_warehouse_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_warehouse
    ADD CONSTRAINT user_warehouse_warehouse_id_fkey FOREIGN KEY (warehouse_id) REFERENCES public.warehouse(warehouse_id) ON DELETE CASCADE;


--
-- Name: warehouse warehouse_custodian_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.warehouse
    ADD CONSTRAINT warehouse_custodian_id_fkey FOREIGN KEY (custodian_id) REFERENCES public.custodian(custodian_id);


--
-- Name: warehouse warehouse_parish_code_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.warehouse
    ADD CONSTRAINT warehouse_parish_code_fkey FOREIGN KEY (parish_code) REFERENCES public.parish(parish_code);


--
-- Name: xfintake xfintake_inventory_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.xfintake
    ADD CONSTRAINT xfintake_inventory_id_fkey FOREIGN KEY (inventory_id) REFERENCES public.inventory(inventory_id);


--
-- Name: xfintake_item xfintake_item_location1_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.xfintake_item
    ADD CONSTRAINT xfintake_item_location1_id_fkey FOREIGN KEY (location1_id) REFERENCES public.location(location_id);


--
-- Name: xfintake_item xfintake_item_location2_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.xfintake_item
    ADD CONSTRAINT xfintake_item_location2_id_fkey FOREIGN KEY (location2_id) REFERENCES public.location(location_id);


--
-- Name: xfintake_item xfintake_item_location3_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.xfintake_item
    ADD CONSTRAINT xfintake_item_location3_id_fkey FOREIGN KEY (location3_id) REFERENCES public.location(location_id);


--
-- Name: xfintake_item xfintake_item_uom_code_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.xfintake_item
    ADD CONSTRAINT xfintake_item_uom_code_fkey FOREIGN KEY (uom_code) REFERENCES public.unitofmeasure(uom_code);


--
-- Name: xfintake xfintake_transfer_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.xfintake
    ADD CONSTRAINT xfintake_transfer_id_fkey FOREIGN KEY (transfer_id) REFERENCES public.transfer(transfer_id);


--
-- Name: xfreturn xfreturn_fr_inventory_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.xfreturn
    ADD CONSTRAINT xfreturn_fr_inventory_id_fkey FOREIGN KEY (fr_inventory_id) REFERENCES public.inventory(inventory_id);


--
-- Name: xfreturn_item xfreturn_item_uom_code_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.xfreturn_item
    ADD CONSTRAINT xfreturn_item_uom_code_fkey FOREIGN KEY (uom_code) REFERENCES public.unitofmeasure(uom_code);


--
-- Name: xfreturn_item xfreturn_item_xfreturn_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.xfreturn_item
    ADD CONSTRAINT xfreturn_item_xfreturn_id_fkey FOREIGN KEY (xfreturn_id) REFERENCES public.xfreturn(xfreturn_id);


--
-- Name: xfreturn xfreturn_to_inventory_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.xfreturn
    ADD CONSTRAINT xfreturn_to_inventory_id_fkey FOREIGN KEY (to_inventory_id) REFERENCES public.inventory(inventory_id);


--
-- PostgreSQL database dump complete
--

